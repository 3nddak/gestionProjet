<?xml version="1.0" encoding="UTF-8"?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                xmlns:adm="http://github.com/adminfaces"
                template="#{layoutMB.template}">
    
    <ui:define name="metadata">
        <ui:param name="title" value="DevÃ©loppement en cours !!!"/> <!-- Automatic create breadCrumb and page title when param 'title' is provided. --> 
        <style type="text/css">
            .ui-datatable .ui-datatable-header {
                text-align: right !important;
            }

        </style>
    </ui:define>
     <ui:define name="description">
        
    </ui:define>

    <ui:define name="body">
<script type="text/javascript">

    var ws = null;

    function connect() {
        var URL = 'ws://' + location.host  + '/websockets/simple';
        if ('WebSocket' in window) {
            ws = new WebSocket(URL);
        } else if ('MozWebSocket' in window) {
            ws = new MozWebSocket(URL);
        } else {
            alert('Le navigateur ne support pas les websoket');
            return;
        }
        ws.onopen = function () {
            addMessage('Concecter!');
        };
        ws.onmessage = function (event) {
            var message = event.data;
            addMessage(message);
        };

        ws.onclose = function () {
            addMessage('Deconnecter!');
        };

        ws.onerror = function (event) {
            addMessage('Erreur!');
        };
    }

    function disconnect() {
        if (ws != null) {
            ws.close();
            ws = null;
        }
    }

    function sendMessage(message) {
        if (ws != null) {
            ws.send(message);
        }
    }

    function addMessage(message) {
        var messages = document.getElementById('messages').value;
        messages += (message + '\n');
        document.getElementById('messages').value = messages;
    }

</script>

<label for="name">Nombre:</label> <input type="text" id="name"/>
<br/><br/>
<button onclick="connect()">Connecter</button>
<button onclick="disconnect()">Deconnecter</button>
<button onclick="sendMessage(document.getElementById('name').value)">Enoyer</button>
<br/><br/>
<textarea rows="5" cols="50" id="messages"></textarea>

</ui:define>



</ui:composition>
