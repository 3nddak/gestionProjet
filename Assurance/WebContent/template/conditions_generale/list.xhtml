<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">


    <ui:composition >
        <h:form id="listcondition" class="form-horizontal">
            <div class="table-responsive">
                <p:dataTable sortOrder="descending"  class="table table-bordered table-condensed table-striped" var="conditionGenerale"  rows="5" rowKey="#{conditionGenerale.idReference}" selection="#{conditionsGeneraleBean.listcCondition_GeneralsToUpdate}" value="#{conditionsGeneraleBean.listcCondition_Generals}"
                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                             paginator="true" paginatorPosition="bottom" emptyMessage="#{msg['tableau.vide']}" scrollWidth="50%" scrollHeight="150"  editable="true" editMode="cell">

                    <p:column headerText="Pays" filterBy="#{conditionGenerale.courtier.pays.designationPays}">
                        <p:outputLabel value="#{conditionGenerale.compagnie.pays.designationPays}"/>
                    </p:column>
                    <p:column headerText="Branche" filterBy="#{conditionGenerale.typeAssurance.reference}">
                        <p:outputLabel value="#{conditionGenerale.typeAssurance.reference}"/>
                    </p:column>
                    <p:column headerText="Courtier" filterBy="#{conditionGenerale.courtier.abbreviation}">
                        <p:outputLabel value="#{conditionGenerale.courtier.abbreviation}"/>
                    </p:column>
                    <p:column headerText="Compagnie" filterBy="#{conditionGenerale.compagnie.abbreviation}">
                        <p:outputLabel value="#{conditionGenerale.compagnie.abbreviation}"/>
                    </p:column>
                    <p:column headerText="Condition générale">
                        <p:cellEditor>
                            <f:facet name="output">
                                <p:outputLabel id="ss4cg" value="#{conditionGenerale.conditionGenerale.toString()}">

                                </p:outputLabel>
                            </f:facet>
                            <f:facet name="input">
                                <h:selectOneMenu converter="entityConverter"  id="cg" value="#{conditionGenerale.conditionGenerale}"   class="form-control" >
                                    <f:selectItems  value="#{conditionsGeneraleBean.listConditionGenerale}" var="cg" itemValue="#{cg}" itemLabel="#{cg}" /> 
                                    <p:ajax update="ss4cg" />
                                </h:selectOneMenu>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Fonction">
                        <p:cellEditor>
                            <f:facet name="output">
                                <p:outputLabel id="ss4f" value="#{conditionGenerale.fonction}">

                                </p:outputLabel>
                            </f:facet>
                            <f:facet name="input">
                                <h:selectOneMenu id="fonction" value="#{conditionGenerale.fonction}" class="form-control"  >
                                    <f:selectItem itemLabel="Fonction" noSelectionOption="true" />
                                    <f:selectItem itemLabel="Max" itemValue="1" />
                                    <f:selectItem itemLabel="Min" itemValue="2" />
                                    <f:selectItem itemLabel="Prime" itemValue="3" />
                                    <p:ajax update="ss4f" />
                                </h:selectOneMenu> 
                            </f:facet>
                        </p:cellEditor>
                    </p:column>


                    <p:column headerText="Designation">
                        <p:cellEditor>
                            <f:facet name="output">
                                <p:outputLabel id="ss4" value="#{conditionGenerale.designation}">

                                </p:outputLabel>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{conditionGenerale.designation}">
                                    <p:ajax event="keyup" update ="ss4"  />

                                </p:inputText>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Description">
                        <p:cellEditor>
                            <f:facet name="output">
                                <p:outputLabel id="ss5" value="#{conditionGenerale.description}">

                                </p:outputLabel>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{conditionGenerale.description}">
                                    <p:ajax event="keyup" update ="ss5" />
                                </p:inputText>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Description">
                        <p:cellEditor>
                            <f:facet name="output">
                                <p:outputLabel id="ss5v" value="#{conditionGenerale.valeur}">

                                </p:outputLabel>
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{conditionGenerale.valeur}">
                                    <p:ajax event="keyup" update ="ss5v" />
                                </p:inputText>
                            </f:facet>
                        </p:cellEditor>
                    </p:column>
                    <p:column headerText="Action">
                        <p:commandButton icon="fa fa-save" title="Enregistrer les modifications" action="#{conditionsGeneraleBean.updateOnecondition_General()}" update="@form" >
                            <f:setPropertyActionListener value="#{conditionGenerale}" target="#{conditionsGeneraleBean.condition_GeneralToUpdate}" />
                        </p:commandButton>
                        <p:commandButton icon="fa fa-trash" title="Supprimer la ligne" action="#{conditionsGeneraleBean.deleteOnecondition_General()}"  update="@form">
                            <f:setPropertyActionListener value="#{conditionGenerale}" target="#{conditionsGeneraleBean.condition_GeneralToUpdate}" />
                        </p:commandButton>
                    </p:column>
  <p:column width="5%"  selectionMode="multiple" style="width: 16px;text-align: center; color: black;" />
                </p:dataTable>
            </div>
            <div class="btn-toolbar">
                <p:commandButton class="btn-danger btn" value="Supprimer"  title="Suppprimer la selection" actionListener="#{conditionsGeneraleBean.deleteListcondition_General()}" update="@form" />
                <p:commandButton class="btn-imprimer btn pull-right"  value="Enrégistrer" title="Enrégistrer la selection" actionListener="#{conditionsGeneraleBean.updateListcondition_General()}" update="@form" />
            </div>
        </h:form>
    </ui:composition>

</html>
