<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:sec="http://www.springframework.org/security/tags"
      >


    <ui:composition>

        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

            <fieldset>
                <legend class="text-center text-uppercase"> <p:outputLabel value="#{msg['liste.pdv']}"></p:outputLabel></legend>
           
           
                    <h:form id="fr3" class="form-horizontal">
                        <p:panel id="t6" header="#{msg['recherche.titre']}" toggleable="true" collapsed="true">
                            <div class="panel-body">
                                <div class="form-group">
                                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">                         
                                        <h:outputLabel for="pays"  value="#{msg['titre.pays']}" class="pull-left text-left"/>                           
                                        <h:selectOneMenu id="pays"   class="form-control"  converter="entityConverter" value="#{etatPointsVenteBean.paysSelected}" >                                          
                                            <f:selectItem itemLabel="#{msg['titre.tousLesPays']}" itemDisabled="false" />
                                            <f:selectItems var="pays" value="#{etatPointsVenteBean.listpays}" itemLabel="#{pays.designationPays}" itemValue="#{pays}" />            
                                        </h:selectOneMenu>                         
                                    </div>  
                                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">                         
                                        <h:outputLabel for="compagnie"  value="#{msg['titre.compagnie']}" class="pull-left text-left"/>                        
                                        <h:selectOneMenu id="compagnie" value="#{etatPointsVenteBean.compagnieSelected}"  converter="entityConverter"  class="form-control" >                                          
                                            <f:selectItem itemLabel="#{msg['titre.tousLesCompagnies']}" itemDisabled="false" />
                                            <f:selectItems value="#{etatPointsVenteBean.listCompagnie}" var="compagnie" itemLabel="#{compagnie.abbreviation}" itemValue="#{compagnie}" />            
                                        </h:selectOneMenu>


                                    </div>

                                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">

                                        <h:outputLabel for="Type courtier"  value="#{msg['pv.courtier']}" class="pull-left text-left"/> 

                                        <h:selectOneMenu id="typecourtier" value="#{etatPointsVenteBean.typeCourtier}"  class="form-control" >                                          
                                            <f:selectItem itemLabel="#{msg['pv.courtier']}" itemDisabled="false" />
                                            <f:selectItem itemLabel="#{msg['pv.courtier.externe']}" itemValue="courtier externe" /> 
                                            <f:selectItem itemLabel="#{msg['pv.courtier.propre']}" itemValue="courtier propre" /> 
                                            <p:ajax listener="#{etatPointsVenteBean.sortCourtier()}" update="courtier" />
                                        </h:selectOneMenu>


                                    </div>
                                    <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">

                                        <h:outputLabel for="courtier"  value="#{msg['titre.courtier']}" class="pull-left text-left"/> 

                                        <h:selectOneMenu id="courtier" converter="entityConverter" value="#{etatPointsVenteBean.courtierSelected}" 
                                                         class="form-control" >                                          
                                            <f:selectItem itemLabel="#{msg['titre.courtier']}" itemDisabled="false" />
                                            <f:selectItems var="courtier" value="#{etatPointsVenteBean.sortedListCourtier}" itemLabel="#{courtier.abbreviation}" itemValue="#{courtier}" />            
                                        </h:selectOneMenu>

                                    </div>
                                </div>


                                <div class="form-group">
                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                        <div class="btn-toolbar pull-right">
                                            <p:commandButton class="btn btn-imprimer" value="#{msg['btn.rechercher']}" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" action="#{etatPointsVenteBean.trier()}" update="f1,fr3"  />
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </p:panel>
                    </h:form>
                    <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                        <h:graphicImage library="images" name="ajax-loader.gif" />
                    </p:dialog>
                <br/>
                    <h:form id="f1" class="form-horizontal">
                        <p:panel id="t1" header="#{msg['liste.pdv']}" toggleable="true" collapsed="false">
                            <div class="panel-body">
                                <div class="btn-toolbar">
                                    <h:commandLink   target="_blank" value="#{msg['btn.imprimer']}" title="#{msg['btn.imprimer']}" class="btn btn-imprimer btn-xs" actionListener="#{etatPointsVenteBean.doGetA()}"   > 
                                        <i class=" glyphicon glyphicon-print"></i>
                                    </h:commandLink>  
                                </div>
                                <p:dataTable sortOrder="descending" sortBy="#{pointsVente.idPointVente}" class="table table-striped table-condensed" var="pointsVente" rowKey="#{pointsVente.idPointVente}" 
                                             id="pdv"  rows="25" value="#{etatPointsVenteBean.listPointsVente}" 
                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                             paginator="true" paginatorPosition="bottom" emptyMessage="#{msg['tableau.vide']}"  scrollWidth="50%" scrollHeight="150"  rowsPerPageTemplate="25,50,100,200,250" > 

                                    <p:column headerText="#{msg['pv.designation']}" filterBy="#{pointsVente.designation}">
                                        <h:outputText value="#{pointsVente.designation}"  />
                                    </p:column>

                                    <p:column headerText="#{msg['pv.adresse']}" filterBy="#{pointsVente.adresse}">
                                        <h:outputText value="#{pointsVente.adresse}" />
                                    </p:column>
                                    <p:column headerText="#{msg['pv.type']}" filterBy="#{pointsVente.typePointVente}">
                                        <h:outputText value="#{pointsVente.typePointVente}" />
                                    </p:column>
                                </p:dataTable>
                            </div>
                        </p:panel>
                    </h:form>
              
                 </fieldset>
        </div>
    </ui:composition> 
</html>

