<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:sec="http://www.springframework.org/security/tags" 
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition>
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <fieldset ><legend class="text-center text-uppercase"><p:outputLabel value="validation de déposit" /></legend>

                <ul class="nav nav-tabs" role="tablist">
                    <li role="presentation" class="active"><a href="#tabMass1" aria-controls="tabMass1" role="tab" data-toggle="tab">Validation des deposits</a></li>
                    <li role="presentation"><a href="#tabMass2" aria-controls="tabMass2" role="tab" data-toggle="tab">Situation des deposits envoyés</a></li>
                </ul>

                <div class="tab-content">
                    <div role="tabpanel" class="tab-pane active" id="tabMass1">
                        <div class="panel">
                            <div class="panel-body">
                                <h:form id="choix" class="form-horizontal">

                                    <h:selectOneRadio  id="filtreR" value="#{validationEcritureComptableBean.option}" >
                                        <f:selectItem itemLabel="Deposits à valider" itemValue="0" />
                                        <f:selectItem itemLabel="Deposits validés"  itemValue="1"  />
                                        <p:ajax listener="#{validationEcritureComptableBean.afficher()}" update="f1,opv" />

                                    </h:selectOneRadio> 

                                </h:form>

                                <h:form id="f1" class="form-horizontal" >

                                    <p:panel id="t1" rendered="#{validationEcritureComptableBean.renderDepositAValide}" header="Deposits à valider" toggleable="false" collapsed="false" class="panel-default">
                                        <div class="panel-body"> 
                                            <p:panel header="Recherche" toggleable="true" toggleSpeed="500"   collapsed="true" class="panel-default" >                          
                                                <div class="panel-body"> 
                                                    <div class="form-group">
                                                        <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <h:outputLabel for="mask" value="Date Debut" />
                                                            </div>
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <p:calendar id="mask" class="form-horizontal"  value="#{validationEcritureComptableBean.dateDebut}" pattern="dd-MM-yyyy" mask="true" >
                                                                </p:calendar>
                                                            </div>
                                                        </div>
                                                        <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <h:outputLabel for="mask2" value="Date Fin " />
                                                            </div>
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <p:calendar id="mask2" class="form-horizontal" value="#{validationEcritureComptableBean.dateFin}" pattern="dd-MM-yyyy" mask="true">
                                                                </p:calendar>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <hr/>

                                                    <div class="form-group">
                                                        <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                                <h:outputLabel for="pays" value="Pays" class="pull-left text-left"/>
                                                            </div>
                                                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                                <h:selectOneMenu id="pays" value="#{validationEcritureComptableBean.paysSelected}" converter="omnifaces.SelectItemsConverter" class="form-control"

                                                                                 >
                                                                    <f:selectItem itemLabel="#{msg['compagnie.pays']}" itemValue=""/>
                                                                    <f:selectItems value="#{validationEcritureComptableBean.listpays}" var="pays" itemLabel="#{pays.designationPays}" itemValue="#{pays}" /> 
                                                                </h:selectOneMenu> 
                                                            </div>                        
                                                        </div>

                                                        <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                                <h:outputLabel  for="pss" value="Compagnie " class="pull-left text-left"/>
                                                            </div>
                                                            <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                                <h:selectOneMenu   class="form-control" converter="omnifaces.SelectItemsConverter"  id="pss" value="#{validationEcritureComptableBean.compagnieSelected}"  >
                                                                    <f:selectItem  itemLabel="Choisir compagnie" itemValue="" /> 
                                                                    <f:selectItems value="#{validationEcritureComptableBean.listCompagnie}" var="compagnie"
                                                                                   itemLabel="#{compagnie.abbreviation}" itemValue="#{compagnie}"/>
                                                                </h:selectOneMenu>
                                                            </div>
                                                        </div>  
                                                        <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                                                                <h:outputLabel for="courtier"  value="#{msg['titre.courtier']}" class="pull-left text-left"/>
                                                            </div>
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <h:selectOneMenu   id="courtier"  value="#{validationEcritureComptableBean.courtierSelected}" converter="omnifaces.SelectItemsConverter"
                                                                                   class="form-control" >
                                                                    <f:selectItem itemLabel="#{msg['titre.courtier']}" itemValue=""/>
                                                                    <f:selectItems itemLabel="#{courtier.designation}" var="courtier"  itemValue="#{courtier}" value="#{validationEcritureComptableBean.listCourtier}"  />

                                                                </h:selectOneMenu>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <h:outputLabel for="pdv"   value="Points de vente" class="pull-left text-left" />
                                                            </div>
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <h:selectOneMenu   id="pdv"  value="#{validationEcritureComptableBean.pvSelected}" converter="omnifaces.SelectItemsConverter"
                                                                                   class="form-control" >
                                                                    <f:selectItem itemLabel="Points de vente" itemValue=""/>
                                                                    <f:selectItems itemLabel="#{pdv.designation}" var="pdv"  itemValue="#{pdv}" value="#{validationEcritureComptableBean.listPointsVente}"  />

                                                                </h:selectOneMenu>
                                                            </div>
                                                        </div>

                                                        <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <h:outputLabel for="gui"   value="Guichets" class="pull-left text-left" />
                                                            </div>
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <h:selectOneMenu   id="gui"  value="#{validationEcritureComptableBean.guichetSelected}" converter="omnifaces.SelectItemsConverter"
                                                                                   class="form-control" >
                                                                    <f:selectItem itemLabel="Guichets" itemValue=""/>
                                                                    <f:selectItems itemLabel="#{gui.designation}" var="gui"  itemValue="#{gui}" value="#{validationEcritureComptableBean.listGuichet}"  />

                                                                </h:selectOneMenu>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="form-group">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                                <div class="btn-toolbar">
                                                                    <p:commandButton onstart="PF('statusDialog2').show()" onsuccess="PF('statusDialog2').hide()" value="Rechercher" update="@form"  actionListener="#{validationEcritureComptableBean.trier()}" class="btn btn-imprimer pull-right" />
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <p:dialog widgetVar="statusDialog2" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                                                        <h:graphicImage library="images" name="ajax-loader.gif" />
                                                    </p:dialog>
                                                </div>
                                            </p:panel> 
                                            <hr/>
                                            <p:panel   header="Liste des déposits à valider" toggleable="false" collapsed="false" class="panel-default">
                                                <div class="panel-body">
                                                    <div class="btn-toolbar">
                                                        <h:commandLink   target="_blank" value="#{msg['btn.imprimer']}" title="#{msg['btn.imprimer']}" class="btn btn-imprimer btn-xs  "  actionListener="#" > 
                                                            <i class=" glyphicon glyphicon-print"></i>
                                                        </h:commandLink>  
                                                    </div>
                                                    <div class="table-responsive">
                                                        <p:dataTable scrollable="true"  scrollWidth="100%" var="preJournal" value="#{validationEcritureComptableBean.listPrejournalnonValideD}" rows="25" 
                                                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                                     paginator="true" paginatorPosition="bottom"    class="table table-bordered table-condensed table-striped"
                                                                     rowsPerPageTemplate="25,50,100,150"  emptyMessage="#{msg['tableau.vide']}" >

                                                            <p:columnGroup type="header">
                                                                <p:growl>     
                                                                    <p:column rowspan="2" headerText="Date demande"  />
                                                                    <p:column colspan="3" headerText="Informations du compte  à débiter" />
                                                                    <p:column colspan="3" headerText="Informations du compte à créditer" />
                                                                    <p:column rowspan="2" headerText="Valeur "  />
                                                                    <p:column rowspan="2" headerText="Action"  />
                                                                </p:growl>
                                                                <p:row>
                                                                    <p:column headerText="Numero Compte" />
                                                                    <p:column headerText="Libele Compte" />
                                                                    <p:column headerText="Societe" />
                                                                    <p:column headerText="Numero Compte" />
                                                                    <p:column headerText="Libele Compte" />
                                                                    <p:column headerText="Societe" />
                                                                </p:row>
                                                            </p:columnGroup>



                                                            <p:column >
                                                                <p:outputLabel value="#{preJournal.dateTransaction}"></p:outputLabel>
                                                            </p:column>
                                                            <p:column >
                                                                <p:outputLabel value="#{preJournal.compteAdebiter.numCompte}"></p:outputLabel>
                                                            </p:column>
                                                            <p:column >
                                                                <p:outputLabel value="#{preJournal.compteAdebiter.libelleCompte}"></p:outputLabel>
                                                            </p:column>

                                                            <p:column >
                                                                <p:outputLabel value="#{preJournal.societeCD}"></p:outputLabel>
                                                            </p:column>

                                                            <p:column >
                                                                <p:outputLabel value="#{preJournal.compteAcrediter.numCompte}"></p:outputLabel>
                                                            </p:column>
                                                            <p:column >
                                                                <p:outputLabel value="#{preJournal.compteAcrediter.libelleCompte}"></p:outputLabel>
                                                            </p:column>

                                                            <p:column >
                                                                <p:outputLabel value="#{preJournal.societeCC}"></p:outputLabel>
                                                            </p:column>
                                                            <p:column >
                                                                <p:outputLabel value="#{preJournal.valeur}"><f:convertNumber pattern="###,##0" type="number" /></p:outputLabel>
                                                            </p:column>

                                                            <p:column>
                                                                <div class="btn-toolbar">
                                                                    <p:commandLink onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="@form,sms,opv" title="Valider" action="#{validationEcritureComptableBean.savePreJournal()}"   class="btn btn-xs btn-purple"  >
                                                                        <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                                        <i class="fa fa-list-alt"/>
                                                                        <p:confirm header="Confirmation" message="ETes-vous sûr ?" icon="ui-icon-alert" />
                                                                    </p:commandLink>

                                                                    <p:commandLink onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="detail"  oncomplete="PF('detail').show()"  title="Detail"    class="btn btn-xs btn-primary"  >
                                                                        <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                                        <i class="fa fa-list"/>
                                                                    </p:commandLink>
                                                                    <p:commandLink  title="Imprimer" class=" btn btn-xs btn-purple" ajax="false" target="/rapport" disabled="#{preJournal.ajustificatif}"    action="#{validationEcritureComptableBean.doGetA()}" >
                                                                        <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                                        <i class="fa fa-print"/>
                                                                    </p:commandLink>
                                                                    <!--p:commandLink onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="@form,sms,opv" title="Rejeter" action="#{validationEcritureComptableBean.rejectPreJournal()}"   class="btn btn-xs btn-purple"  >
                                                                        <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                                        <i class="fa fa-list-alt"/>
                                                                        <p:confirm header="Confirmation" message="ETes-vous sûr ?" icon="ui-icon-alert" />
                                                                    </p:commandLink-->
                                                                </div>
                                                            </p:column>
                                                            <p:growl for="somekey" id="sms" />
                                                        </p:dataTable>

                                                    </div>
                                                </div>
                                            </p:panel>
                                        </div>
                                    </p:panel>

                                </h:form>
                                <h:form id="opv" class="form-horizontal">
                                    <p:panel id="t2" rendered="#{validationEcritureComptableBean.renderDepositValide}" header="Deposits validés" toggleable="false" collapsed="false" style="margin-bottom:20px">
                                        <p:panel header="Recherche" toggleable="true" toggleSpeed="500"   collapsed="true" >                          
                                            <div class="panel-body"> 
                                                <div class="form-group">
                                                    <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <h:outputLabel for="mask" value="Date Debut " /> <h:outputLabel for="mask" value="*" class="etoile_rouge" />
                                                        </div>
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <p:calendar id="mask" class="form-control" required="true" value="#{gLivreBean.du}" pattern="dd-MM-yyyy" mask="true" >
                                                            </p:calendar>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <p:outputLabel for="mask2" value="Date Fin" /><h:outputLabel for="mask2" value="*" class="etoile_rouge" />
                                                        </div>
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <p:calendar id="mask2" class="form-control"  value="#{gLivreBean.au}" pattern="dd-MM-yyyy" mask="true">
                                                            </p:calendar>
                                                        </div>
                                                    </div>
                                                </div>

                                                <hr/>

                                                <div class="form-group">
                                                    <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                            <h:outputLabel for="pays" value="Pays" class="pull-left text-left"/>
                                                        </div>
                                                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                            <h:selectOneMenu id="pays" value="#{gLivreBean.factureFortri.pays}" converter="omnifaces.SelectItemsConverter" class="form-control"

                                                                             >
                                                                <f:selectItem itemLabel="#{msg['compagnie.pays']}" itemValue=""/>
                                                                <f:selectItems value="#{gLivreBean.listPays}" var="pays" itemLabel="#{pays.designationPays}" itemValue="#{pays}" /> 
                                                            </h:selectOneMenu> 
                                                        </div>                        
                                                    </div>


                                                    <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                            <h:outputLabel  for="pss" value="Compagnie " class="pull-left text-left"/>
                                                        </div>
                                                        <div class="col-md-12 col-lg-12 col-sm-12 col-xs-12">
                                                            <h:selectOneMenu   class="form-control" converter="omnifaces.SelectItemsConverter"  id="pss" value="#{gLivreBean.factureFortri.compagnie}"  >
                                                                <f:selectItem  itemLabel="Choisir compagnie" itemValue="" /> 
                                                                <f:selectItems value="#{gLivreBean.listCompagnie}" var="compagnie"
                                                                               itemLabel="#{compagnie.abbreviation}" itemValue="#{compagnie}"/>
                                                            </h:selectOneMenu>
                                                        </div>
                                                    </div>  
                                                    <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                                                            <h:outputLabel for="courtier"  value="#{msg['titre.courtier']}" class="pull-left text-left"/>
                                                        </div>
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <h:selectOneMenu   id="courtier"  value="#{gLivreBean.factureFortri.courtier}" converter="omnifaces.SelectItemsConverter"
                                                                               class="form-control" >
                                                                <f:selectItem itemLabel="#{msg['titre.courtier']}" itemValue=""/>
                                                                <f:selectItems itemLabel="#{courtier.designation}" var="courtier"  itemValue="#{courtier}" value="#{gLivreBean.listCourtier}"  />

                                                            </h:selectOneMenu>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <h:outputLabel for="pdv"   value="Points de vente" class="pull-left text-left" />
                                                        </div>
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <h:selectOneMenu   id="pdv"  value="#{gLivreBean.factureFortri.pointsVente}" converter="omnifaces.SelectItemsConverter"
                                                                               class="form-control" >
                                                                <f:selectItem itemLabel="Points de vente" itemValue=""/>
                                                                <f:selectItems itemLabel="#{pdv.designation}" var="pdv"  itemValue="#{pdv}" value="#{gLivreBean.listPointsVente}"  />

                                                            </h:selectOneMenu>

                                                        </div>

                                                    </div>

                                                    <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">

                                                            <h:outputLabel for="gui"   value="Guichets" class="pull-left text-left" />
                                                        </div>
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <h:selectOneMenu   id="gui"  value="#{gLivreBean.factureFortri.guichet}" converter="omnifaces.SelectItemsConverter"
                                                                               class="form-control" >
                                                                <f:selectItem itemLabel="Guichets" itemValue=""/>
                                                                <f:selectItems itemLabel="#{gui.designation}" var="gui"  itemValue="#{gui}" value="#{gLivreBean.listGuichets}"  />

                                                            </h:selectOneMenu>
                                                        </div>
                                                    </div>

                                                    <div class="col-md-4 col-lg-4 col-sm-6 col-xs-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <h:outputLabel for="ncp"   value="NCP" class="pull-left text-left" />
                                                        </div>
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                            <h:selectOneMenu   id="ncp"  value="#{gLivreBean.ncp}"
                                                                               class="form-control" >
                                                                <f:selectItem itemLabel=" structure ncp" itemValue=""/>
                                                                <f:selectItem itemLabel="NCP" itemValue="ncp"/>

                                                            </h:selectOneMenu>

                                                        </div>
                                                    </div>
                                                </div>

                                                <div class="form-group">
                                                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12"> 
                                                            <div class="btn-toolbar">
                                                                <p:commandButton onstart="PF('statusDialog2').show()" onsuccess="PF('statusDialog2').hide()" value="Rechercher"  actionListener="#{gLivreBean.afficherGrandLivre()}" class="btn btn-imprimer   pull-right" />
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <p:dialog widgetVar="statusDialog2" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                                                    <h:graphicImage library="images" name="ajax-loader.gif" />
                                                </p:dialog>
                                            </div>
                                        </p:panel> 
                                        <p:panel   header="Liste des déposits valider" toggleable="false" collapsed="false" class="panel-default">
                                            <div>
                                                <h:commandLink   target="_blank" value="#{msg['btn.imprimer']}" title="#{msg['btn.imprimer']}" class="btn btn-imprimer btn-xs  "  actionListener="#" > 
                                                    <i class=" glyphicon glyphicon-print"></i>
                                                </h:commandLink>  
                                            </div>
                                            <div class="table-responsive">
                                                <p:dataTable var="preJournal" scrollable="true"  scrollWidth="100%" value="#{validationEcritureComptableBean.listPrejournalValideD}"
                                                             paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                             paginator="true" paginatorPosition="bottom" style="margin-bottom:20px"   class="table table-bordered table-striped table-condensed"
                                                             rowsPerPageTemplate="25,50,100,150,200"  emptyMessage="#{msg['tableau.vide']}" rows="25" >
                                                    <p:columnGroup type="header">
                                                        <p:growl>     

                                                            <p:column rowspan="2" headerText="Date demande"  />
                                                            <p:column colspan="3" headerText="Informations du compte  à débiter" />
                                                            <p:column colspan="3" headerText="Informations du compte à créditer" />
                                                            <p:column rowspan="2" headerText="Valeur "  />
                                                            <p:column rowspan="2" headerText="Action"  />

                                                        </p:growl>
                                                        <p:row>
                                                            <p:column headerText="Numero Compte" />
                                                            <p:column headerText="Libele Compte" />
                                                            <p:column headerText="Societe" />
                                                            <p:column headerText="Numero Compte" />
                                                            <p:column headerText="Libele Compte" />
                                                            <p:column headerText="Societe" />
                                                        </p:row>
                                                    </p:columnGroup>



                                                    <p:column >
                                                        <p:outputLabel value="#{preJournal.dateTransaction}"></p:outputLabel>
                                                    </p:column>
                                                    <p:column >
                                                        <p:outputLabel value="#{preJournal.compteAdebiter.numCompte}"></p:outputLabel>
                                                    </p:column>
                                                    <p:column >
                                                        <p:outputLabel value="#{preJournal.compteAdebiter.libelleCompte}"></p:outputLabel>
                                                    </p:column>

                                                    <p:column >
                                                        <p:outputLabel value="#{preJournal.societeCD}"></p:outputLabel>
                                                    </p:column>

                                                    <p:column >
                                                        <p:outputLabel value="#{preJournal.compteAcrediter.numCompte}"></p:outputLabel>
                                                    </p:column>
                                                    <p:column >
                                                        <p:outputLabel value="#{preJournal.compteAcrediter.libelleCompte}"></p:outputLabel>
                                                    </p:column>

                                                    <p:column >
                                                        <p:outputLabel value="#{preJournal.societeCC}"></p:outputLabel>
                                                    </p:column>
                                                    <p:column >
                                                        <p:outputLabel value="#{preJournal.valeur}"><f:convertNumber pattern="###,##0" type="number" /></p:outputLabel>
                                                    </p:column>
                                                    <p:column>
                                                        <div class="btn-toolbar">
                                                            <p:commandLink onstart="PF('statusDialog').show()"  onsuccess="PF('statusDialog').hide()" update="detail"  oncomplete="PF('detail').show()"  title="Detail"    class=" btn btn-xs btn-primary"  >
                                                                <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                                <i class="fa fa-list-alt" />
                                                            </p:commandLink>
                                                            <p:commandLink  title="Imprimer" class=" btn btn-xs btn-imprimer" ajax="false" target="/rapport" disabled="#{preJournal.ajustificatif}"  action="#{validationEcritureComptableBean.doGetA()}" >
                                                                <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                                <i class="fa fa-list" />
                                                            </p:commandLink>
                                                        </div>
                                                    </p:column>
                                                </p:dataTable>
                                            </div>
                                        </p:panel>
                                    </p:panel>

                                </h:form>
                            </div>
                        </div>
                    </div>
                    <div role="tabpanel" class="tab-pane" id="tabMass2">
                        <h:form id="f2" class="form-horizontal">
                            <p:panel header="Deposits envoyés pour validation" toggleable="true" collapsed="false" style="margin-bottom:20px">
                                <div class="table-responsive">
                                    <p:dataTable id="t3" var="preJournal" scrollable="true" rows="10" scrollWidth="100%" value="#{validationEcritureComptableBean.listPrejournalnonValideC}"
                                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 paginator="true" paginatorPosition="bottom"    class="table table-bordered table-condensed table-striped"
                                                 rowsPerPageTemplate="10,20,30,40,50"  emptyMessage="#{msg['tableau.vide']}" >
                                        <p:columnGroup type="header">
                                            <p:growl>     

                                                <p:column rowspan="2" headerText="Date demande"  />
                                                <p:column colspan="3" headerText="Informations du compte  à débiter" />
                                                <p:column colspan="3" headerText="Informations du compte à créditer" />
                                                <p:column rowspan="2" headerText="Valeur "  />
                                                <p:column rowspan="2" headerText="Etat"  />
                                                <p:column rowspan="2" headerText="Action"  />

                                            </p:growl>
                                            <p:row>
                                                <p:column headerText="Numero Compte" />
                                                <p:column headerText="Libele Compte" />
                                                <p:column headerText="Societe" />
                                                <p:column headerText="Numero Compte" />
                                                <p:column headerText="Libele Compte" />
                                                <p:column headerText="Societe" />
                                            </p:row>
                                        </p:columnGroup>



                                        <p:column >
                                            <p:outputLabel value="#{preJournal.dateTransaction}"></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.compteAdebiter.numCompte}"></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.compteAdebiter.libelleCompte}"></p:outputLabel>
                                        </p:column>

                                        <p:column >
                                            <p:outputLabel value="#{preJournal.societeCD}"></p:outputLabel>
                                        </p:column>

                                        <p:column >
                                            <p:outputLabel value="#{preJournal.compteAcrediter.numCompte}"></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.compteAcrediter.libelleCompte}"></p:outputLabel>
                                        </p:column>

                                        <p:column >
                                            <p:outputLabel value="#{preJournal.societeCC}"></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.valeur}"><f:convertNumber pattern="###,##0" type="number" /></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.statutPreLibelle}"></p:outputLabel>
                                        </p:column>
                                        <p:column>

                                            <p:commandLink onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="detail"  oncomplete="PF('detail').show()"  title="Valider"    class="glyphicon glyphicon-list"  >
                                                <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                            </p:commandLink>

                                            <p:commandLink  title="Imprimer" class=" btn-sm btn-sm sm glyphicon glyphicon-picture" disabled="#{preJournal.ajustificatif}"   ajax="false" target="/rapport"   action="#{validationEcritureComptableBean.doGetA()}" >
                                                <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                            </p:commandLink>

                                            <!--p:commandLink update="@form,sms2,f2"  onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" title="annuler" action="#{validationEcritureComptableBean.cancelPreJournal()}"   class="btn btn-xs btn-purple"  >
                                                <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                <i class="fa fa-list-alt"/>
                                                <p:confirm header="Confirmation" message="ETes-vous sûr ?" icon="ui-icon-alert" />
                                            </p:commandLink-->

                                        </p:column>
                                        <p:growl for="somekey" id="sms2" />
                                    </p:dataTable>
                                </div>
                            </p:panel>

                        </h:form>
                        <h:form id="f3" class="form-horizontal">
                            <p:panel header="Deposits validés après envoi" toggleable="true" collapsed="false" >
                                <div class="table-responsive"> 
                                    <p:dataTable id="t4" var="preJournal"  scrollable="true"  scrollWidth="100%" rows="25"  value="#{validationEcritureComptableBean.listPrejournalValideC}"
                                                 paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                                 paginator="true" paginatorPosition="bottom"    class="table-striped table-bordered table-condensed table"
                                                 rowsPerPageTemplate="25,50,100,200,300"  emptyMessage="#{msg['tableau.vide']}" >
                                        <p:columnGroup type="header">
                                            <p:growl>     
                                                <p:column rowspan="2" headerText="Date demande"  />
                                                <p:column colspan="3" headerText="Informations du compte  à débiter" />
                                                <p:column colspan="3" headerText="Informations du compte à créditer" />
                                                <p:column rowspan="2" headerText="Valeur "  />
                                                <p:column rowspan="2" headerText="Action"  />

                                            </p:growl>
                                            <p:row>
                                                <p:column headerText="Numero Compte" />
                                                <p:column headerText="Libele Compte" />
                                                <p:column headerText="Societe" />
                                                <p:column headerText="Numero Compte" />
                                                <p:column headerText="Libele Compte" />
                                                <p:column headerText="Societe" />
                                            </p:row>
                                        </p:columnGroup>



                                        <p:column >
                                            <p:outputLabel value="#{preJournal.dateTransaction}"></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.compteAdebiter.numCompte}"></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.compteAdebiter.libelleCompte}"></p:outputLabel>
                                        </p:column>

                                        <p:column >
                                            <p:outputLabel value="#{preJournal.societeCD}"></p:outputLabel>
                                        </p:column>

                                        <p:column >
                                            <p:outputLabel value="#{preJournal.compteAcrediter.numCompte}"></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.compteAcrediter.libelleCompte}"></p:outputLabel>
                                        </p:column>

                                        <p:column >
                                            <p:outputLabel value="#{preJournal.societeCC}"></p:outputLabel>
                                        </p:column>
                                        <p:column >
                                            <p:outputLabel value="#{preJournal.valeur}"><f:convertNumber pattern="###,##0" type="number" /></p:outputLabel>
                                        </p:column>
                                        <p:column>
                                            <div class="btn-toolbar">
                                                <p:commandLink onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="detail"  oncomplete="PF('detail').show()"  title="Detail"    class="btn btn-xs btn-primary"  >
                                                    <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                    <i class="fa fa-list-alt"/>
                                                </p:commandLink>

                                                <p:commandLink  title="Imprimer" class=" btn btn-xs btn-imprimer" disabled="#{preJournal.ajustificatif}"  ajax="false" target="/rapport"   action="#{validationEcritureComptableBean.doGetA()}" >
                                                    <f:setPropertyActionListener value="#{preJournal}" target="#{validationEcritureComptableBean.preJournalSelect}" />
                                                    <i class="fa fa-print"/>
                                                </p:commandLink>
                                            </div>
                                        </p:column>
                                    </p:dataTable>
                                </div> 
                            </p:panel>

                        </h:form>
                    </div>
                </div>

                <p:dialog widgetVar="detail" id="detail">
                    <h:form class="form-horizontal">
                        <p:panel header="Informations du compte à Debiter" collapsed="false" closable="true">
                            <p:panelGrid columns="2" layout="grid">
                                <p:outputLabel for="ncd" value="Numero du compte" />
                                <p:outputLabel id="ncd"  value="#{validationEcritureComptableBean.preJournalSelect.compteAdebiter.numCompte}" />
                                <p:outputLabel for="ncl" value="Libelle du compte" />
                                <p:outputLabel id="ncl"  value="#{validationEcritureComptableBean.preJournalSelect.compteAdebiter.libelleCompte}" />
                                <p:outputLabel for="ncs" value=" Societe" />
                                <p:outputLabel id="ncs"  value="#{validationEcritureComptableBean.preJournalSelect.societeCD}" />

                            </p:panelGrid>
                        </p:panel>
                        <p:panel header="Informations du compte à crediter" collapsed="false" closable="true">
                            <p:panelGrid columns="2" layout="grid">
                                <p:outputLabel for="ndd" value="Numero du compte" />
                                <p:outputLabel id="ndd"  value="#{validationEcritureComptableBean.preJournalSelect.compteAcrediter.numCompte}" />
                                <p:outputLabel for="ndl" value="Libelle du compte" />
                                <p:outputLabel id="ndl"  value="#{validationEcritureComptableBean.preJournalSelect.compteAcrediter.libelleCompte}" />
                                <p:outputLabel for="nds" value=" Societe" />
                                <p:outputLabel id="nds"  value="#{validationEcritureComptableBean.preJournalSelect.societeCC}" />
                            </p:panelGrid> 

                        </p:panel>
                        <p:panel >
                            <p:panelGrid columns="2" layout="grid">
                                <p:outputLabel for="ndds" value="Date de la demande" />
                                <p:outputLabel id="ndds"  value="#{validationEcritureComptableBean.preJournalSelect.dateTransaction}" />
                                <p:outputLabel for="nddv" value="Date de Validatoon" />
                                <p:outputLabel id="nddv"  value="#{validationEcritureComptableBean.preJournalSelect.dateValidation}" />
                                <p:outputLabel for="nddj" value="Type de payement" />
                                <p:outputLabel id="nddj"  value="#{validationEcritureComptableBean.preJournalSelect.typePayementNom}" />
                                <p:outputLabel for="ndls" value="Description" />
                                <p:outputLabel id="ndls"  value="#{validationEcritureComptableBean.preJournalSelect.description}" />
                                <p:outputLabel for="ndss" value=" Valeur" />
                                <p:outputLabel id="ndss"  value="#{validationEcritureComptableBean.preJournalSelect.valeur}" >
                                    <f:convertNumber pattern="###,##0" type="number" />
                                </p:outputLabel>
                            </p:panelGrid>
                        </p:panel>
                    </h:form>
                </p:dialog>

                <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                    <h:graphicImage library="images" name="ajax-loader.gif" />
                </p:dialog>

                <p:confirmDialog  global="true" showEffect="fade" hideEffect="fade">
                    <h:form class="form-horizontal">
                        <p:commandButton value="Oui" type="button" class="ui-confirmdialog-yes " icon="fa fa-check" actionListener="#{factureCourtierBean.comptabilite()}" />
                        <p:commandButton value="Non" type="button" class="ui-confirmdialog-no" icon="fa fa-close" />
                    </h:form>
                </p:confirmDialog>

                <h:form class="form-horizontal">
                    <p:remoteCommand name="newProposition" process="@this" actionListener ="#{validationEcritureComptableBean.ini()}" update="f1:t1,opv:t2,f2:t3,f3:t4" autoRun="false"/>
                </h:form>
            </fieldset>
        </div>
    </ui:composition>
</html>
