<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>
        <div class="row">
            <div class="col-md-12 col-lg-12 col-sm-12">
                <fieldset> 
                    <legend class="text-center text-uppercase"> <p:outputLabel value="#{msg['titre.questionsCompagnie']}"></p:outputLabel></legend>
                </fieldset>
                <p:fieldset legend="#{msg['titre.ajouterUneQuestion']}" toggleable="true" collapsed="false" toggleSpeed="500"  style="margin-bottom:20px">  
                    <h:form id="questionCreateForm" class="form-horizontal">
                        <p:growl id="msgs" globalOnly="true" showDetail="false"  life="3000"/>
                        <div class="form-group" >
                            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <p:outputLabel  value="#{msg['titre.compagnie']}" class="pull-left" />
                                    <h:outputLabel value="*" class="etoile_rouge pull-left" />
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <h:selectOneMenu  class="form-control" id="comp" required="true" requiredMessage="#{msg['courtier.compagnie.requireMessage']}" label="#{msg['titre.compagnie']}" value="#{questionnaireCompagnieAsVieBean.questionnaireCompagnieAsVieToSave.compagnie}" converter="omnifaces.SelectItemsConverter">
                                        <f:selectItem itemLabel="#{msg['titre.compagnie']}" noSelectionOption="true" />
                                        <f:selectItems value="#{questionnaireCompagnieAsVieBean.listCompagnie}" var="com" itemLabel="#{com.designation}" itemValue="#{com}" />
                                        <p:ajax event="click" update="compagnieMessage" />
                                    </h:selectOneMenu>
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <h:message id="compagnieMessage" for="comp" class="errorClass" />
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <p:outputLabel  value="#{msg['titre.question']}" class="pull-left" />
                                    <h:outputLabel value="*" class="etoile_rouge pull-left" />
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <p:inputText  class="form-control" id="question" value="#{questionnaireCompagnieAsVieBean.questionnaireCompagnieAsVieToSave.question}" />
                                </div>
                            </div>
                        </div>
                        <div class="form-group" >
                            <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <p:outputLabel  value="#{msg['titre.position']}" class="pull-left" />
                                    <h:outputLabel value="*" class="etoile_rouge pull-left" />
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <p:inputText  class="form-control" id="position" value="#{questionnaireCompagnieAsVieBean.questionnaireCompagnieAsVieToSave.position}" >
                                    </p:inputText>
                                </div>
                                <pe:keyFilter for="position" preventPaste="true" mask="pint"/>
                            </div>
                            <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <p:outputLabel  value="#{msg['btn.activer']}" class="pull-left" />
                                </div>
                                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                                    <p:selectBooleanCheckbox value="#{questionnaireCompagnieAsVieBean.questionnaireCompagnieAsVieToSave.active}" >
                                    </p:selectBooleanCheckbox>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <div class="col-lg-12  col-md-12 col-xs-12 col-sm-12">
                                <div class="col-lg-2 col-md-12 pull-right col-xs-12 col-sm-12">
                                    <p:commandButton id="ajouter" rendered="#{questionnaireCompagnieAsVieBean.displaySaveButton}" action="#{questionnaireCompagnieAsVieBean.saveQuestion()}"  update="@form,msgs,questionListForm" value="#{msg['btn.enregistrer']}"  class="btn-success success form-control" />
                                    <p:commandButton id="modifier" rendered="#{questionnaireCompagnieAsVieBean.displayUpdateButton}" action="#{questionnaireCompagnieAsVieBean.updateQuestion()}" update="@form,msgs,questionListForm" value="#{msg['btn.modifier']}"  class="btn-success success form-control" />
                                </div>
                                <div class="col-lg-2 col-md-12 pull-right col-xs-12 col-sm-12">
                                    <p:commandButton id="annuler" action="#{questionnaireCompagnieAsVieBean.cancel()}" update="@form,questionListForm" value="#{msg['btn.annuller']}"  class="btn-danger danger form-control" />
                                </div>
                            </div>
                        </div>
                    </h:form>
                </p:fieldset>    
            </div>

            <div class="col-md-12 col-lg-12 col-sm-12">
                <p:fieldset legend="#{msg['titre.listeDesQuestions']}" toggleable="true" collapsed="false" toggleSpeed="500"  style="margin-bottom:20px">
                    <h:form id="questionListForm" class="form-horizontal">
                        <p:dataTable id="listQuestion" class="table table-bordered table-hover" rows="6" rowKey="#{qlist.idQuestionnaireCompagnieAsVie}" 
                                     emptyMessage="#{msg['tableau.vide']}"
                                     paginator="true" paginatorPosition="bottom"  var="qlist" value="#{questionnaireCompagnieAsVieBean.listQuestionnaireCompagnieAsVies}" >

                            <p:column headerText="#{msg['titre.compagnie']}" filterBy="#{qlist.compagnie.abbreviation}" >
                                <p:outputLabel value="#{qlist.compagnie.abbreviation}"/>
                            </p:column>
                            <p:column headerText="#{msg['titre.question']}" filterBy="#{qlist.question}" >
                                <p:outputLabel value="#{qlist.question}"/>
                            </p:column>
                            <p:column headerText="#{msg['titre.position']}" filterBy="#{qlist.position}" >
                                <p:outputLabel value="#{qlist.position}"/>
                            </p:column>
                            <p:column headerText="#{msg['titre.active']}" >
                                <p:outputLabel value="#{qlist.active}"/>
                            </p:column>
                            <p:column style="text-align: center" width="10%" headerText="#{msg['titre.option']}"  >
                                <p:commandButton update="questionCreateForm,questionCreateForm:msgs" action="#{questionnaireCompagnieAsVieBean.editQuestion()}" icon="fa fa-edit" class="btn btn-xs btn-primary" >
                                    <f:setPropertyActionListener value="#{qlist}" target="#{questionnaireCompagnieAsVieBean.questionnaireCompagnieAsVieToEdit}" />
                                </p:commandButton>
                                <p:commandButton  update="@form,questionCreateForm:msgs"  action="#{questionnaireCompagnieAsVieBean.deleteQuestion()}" icon="fa fa-trash" class="btn btn-danger btn-xs">
                                    <f:setPropertyActionListener value="#{qlist}" target="#{questionnaireCompagnieAsVieBean.questionnaireCompagnieAsVieToDelete}" />
                                    <p:confirm icon="ui-icon-alert"/>
                                </p:commandButton>
                            </p:column>
                        </p:dataTable>
                    </h:form>
                </p:fieldset> 
            </div>
        </div>
    </ui:composition>
</html>
