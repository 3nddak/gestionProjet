<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">


    <ui:composition>
        <div class=" col-lg-12 col-md-12 col-xm-12 col-sm-12">
            <fieldset>
                <legend class="text-center text-uppercase"> <p:outputLabel value="Attestations "></p:outputLabel></legend>
            </fieldset>
            <h:form id="vf">

                <p:panel header="Attestations reÃ§ues" style="margin-bottom:20px">
                    <div >
                        <h:outputLabel class="police_label" value="#{msg['btn.rechercher']} : " for="recherche" />
                        <p:inputText id="recherche"  value="#{attestationDeleivreBean.stringToSearch}" >
                            <p:ajax event="keyup"  update="hh"  />
                        </p:inputText>

                        </div>
                    <p:spacer/>
                    
                    <p:dataTable class="table-bordered table table-responsive" paginator="true" paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink}"
                                 emptyMessage="#{msg['tableau.vide']}" paginatorPosition="bottom" id="hh" value="#{attestationDeleivreBean.demandeEnvoyerAList}" editable="true" var="demande">
                        <p:columnGroup type="header">
                            <p:growl>
                                <p:column rowspan="2" headerText="COMPAGNIE" />
                                <p:column rowspan="2" headerText="NUM DEMANDE" />
                                <p:column colspan="2" headerText="INFORMATIONS DU CLIENT" />
                                <p:column colspan="4" headerText="INFORMATIONS DU VEHICULE" />
                                <p:column rowspan="2" headerText="CAUTION" width="13%" />
                                <p:column rowspan="2" headerText="ACTIONS" width="10%" />

                            </p:growl>
                            <p:row>
                                <p:column headerText="NOM"  />
                                <p:column headerText="PRENOM" />
                                <p:column headerText="MARQUE" />
                                <p:column headerText="ENERGIE" />
                                <p:column headerText="NUM CHASSIS" />
                                <p:column headerText="PUISSANCE" />  
                            </p:row>
                        </p:columnGroup>

                        <p:column>
                            <p:outputLabel value="#{demande.compagnie.abbreviation}"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="#{demande.hashCode()}"/>
                        </p:column>
                        <p:column>
                            <p:outputLabel value="#{demande.demandeAttestation.client.nom}"/>
                        </p:column>
                        <p:column >
                            <p:outputLabel value="#{demande.demandeAttestation.client.prenom}"/>
                        </p:column>

                        <p:column >
                            <p:outputLabel value="#{demande.demandeAttestation.marque}"/>
                        </p:column>
                        <p:column >
                            <p:outputLabel value="#{demande.demandeAttestation.ennergie.libelleFr}"/>
                        </p:column>
                        <p:column >
                            <p:outputLabel value="#{demande.demandeAttestation.numChassi}"/>
                        </p:column>
                        <p:column >
                            <p:outputLabel value="#{demande.demandeAttestation.puissance}"/>
                        </p:column>

                        <p:column  >
                            <p:outputLabel value="#{demande.cout}"/>
                        </p:column>
                        <p:column>


                            <p:commandLink  class="btn-sm btn-primary primary glyphicon glyphicon-print"  action="#{attestationDeleivreBean.doGetA()}" ajax="false" target="/"  >
                                <f:setPropertyActionListener target="#{attestationDeleivreBean.demandeEnvoyerA}" value="#{demande}" />
                            </p:commandLink>
                        </p:column>

                    </p:dataTable>
                </p:panel>


            </h:form>
            <h:form id="f">
                <p:remoteCommand name="newProposition"    process="f" partialSubmit="true"  actionListener ="#{attestationDeleivreBean.init()}"  update="vf" autoRun="false"/> 
            </h:form>


            <p:dialog widgetVar="statusDialog" modal="true" draggable="false" closable="false" resizable="false" showHeader="false">
                <h:graphicImage library="images" name="ajax-loader.gif" />
            </p:dialog>
        </div>
    </ui:composition>
</html>
