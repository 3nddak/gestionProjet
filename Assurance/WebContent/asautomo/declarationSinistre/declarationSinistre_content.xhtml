<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>
        <div class="col-lg-12 col-sm-12 col-md-12 col-xs-12">
            <fieldset> 
                <legend class="text-center text-uppercase"> <p:outputLabel value="Declaration sinistre"></p:outputLabel></legend>
            </fieldset>
            <h:form id="formliste" class="form-horizontal ">
                <p:growl id="msgsAux"  globalOnly="true"  severity="info,warn"/>   

                <p:wizard    flowListener="#{declarationSinistreBean.onFlowProcess2}"  nextLabel="#{msg['btn.suivant']}" backLabel="#{msg['btn.prescedent']}" >

                    <p:tab id="police" title="Numero du contrat" class="tab-pane" >

                        <div class="panel" style="border:none" >
                            <div class="panel-body">
                                <ui:include src="police.xhtml"/>
                            </div> 
                        </div>
                    </p:tab>

                    <p:tab id="natureES"  title="Nature de l'évenement" class="tab-pane" >

                        <div class="panel" style="border:none" >
                            <div class="panel-body">
                                <ui:include src="natureEvenementSinistre.xhtml"/>
                            </div> 
                        </div>
                    </p:tab>
                    <p:tab id="scenario"  title="scénario de la situation" class="tab-pane" >

                        <div class="panel" style="border:none" >
                            <div class="panel-body">
                                <ui:include src="scenarioSituations.xhtml"/>
                            </div> 
                        </div>
                    </p:tab>
                    <p:tab id="circonstance"  title="Circonstances du sinistre" class="tab-pane" >

                        <div class="panel" style="border:none" >
                            <div class="panel-body">
                                <ui:include src="circonstances.xhtml"/>
                            </div> 
                        </div>
                    </p:tab>
                    <p:tab id="dommage"  title="Dommages Vehicules /Tiers" class="tab-pane" >

                        <div class="panel" style="border:none" >
                            <div class="panel-body">
                                <ui:include src="vehiculesDommagees.xhtml"/>
                            </div> 
                        </div>
                    </p:tab>
                    <p:tab id="souscripteur" title="Identification su souscripteur" class="tab-pane" >

                        <div class="panel" style="border:none" >
                            <div class="panel-body">
                                <ui:include src="souscripteur.xhtml"/>
                            </div> 
                        </div>
                    </p:tab>
                    <p:tab id="declar" title="Envoyer la déclaration" class="tab-pane" >

                        <div class="panel" style="border:none" >
                            <div class="panel-body">
                                <ui:include src="declaration.xhtml"/>
                            </div> 
                        </div>
                        <div class="row">
                            <div class="col-md-12 col-xs-12 col-sm-12 col-lg-12">
                                <p:commandButton value="Envoyer" update="formliste,msgsAux" action="#{declarationSinistreBean.saveDeclarationSinistre()}" onstart="PF('loadProcess').block()" oncomplete="PF('loadProcess').unblock()" class="btn btn-success btn-xs pull-right">
                                    <p:confirm header="Confirmation" message="Etes-vous sûr?" icon="fa fa-trash"  />

                                </p:commandButton>

                            </div>
                        </div>
                    </p:tab>


                </p:wizard>
            </h:form>
        </div>
        <pe:blockUI widgetVar="loadProcess">  
            <h:panelGrid columns="2">  
                <h:graphicImage library="images" name="ajax-loading-bar.gif"/>   
            </h:panelGrid>  
        </pe:blockUI>  
    </ui:composition>
</html>
