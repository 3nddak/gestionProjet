<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>
        <h:form  id="formliste" class="form-horizontal">
            <p:panel header ="#{msg['titre.ListeAssurancesCompte']}" toggleable="true">
                <p:dataTable rows="8" paginator="true" paginatorPosition="bottom" emptyMessage="#{msg['tableau.vide']}" class="table table-responsive" var="asscompte" value="#{renouvellementAsCompteBean.listeAssuranceCompte}" rowKey="#{asscompte.idFacture}" selection="#{renouvellementAsCompteBean.lastAssuranceCompte}">
                    <p:column headerText="#{msg['titre.renouveler']}" >
                        <p:commandLink title="#{msg['titre.renouveler']}" class=" btn-sm btn-info info glyphicon glyphicon-refresh" onstart="PF('statusDialog').show()" onsuccess="PF('statusDialog').hide()" update="client,detail,validation"  action ="#{renouvellementAsCompteBean.listener()}">
                            <f:setPropertyActionListener target="#{renouvellementAsCompteBean.lastAssuranceCompte}" value="#{asscompte}"/>
                        </p:commandLink>
                    </p:column>
                    <p:column headerText="#{msg['titre.numeroPolice']}" filterBy="#{asscompte.numeroPolice}" >
                        <h:outputText value="#{asscompte.numeroPolice}"/>
                    </p:column>
                    <p:column headerText="#{msg['titre.compagnie']}" filterBy="#{asscompte.compagnie.abbreviation}">
                        <h:outputText value="#{asscompte.compagnie.abbreviation}"/>
                    </p:column>
                    <p:column headerText="#{msg['client.nom']}" >
                        <h:outputText value="#{asscompte.client.nom}"/>
                    </p:column>
                    <p:column  headerText="#{msg['client.prenom']}">
                        <h:outputText value="#{asscompte.client.prenom}"/>
                    </p:column>
                </p:dataTable>
            </p:panel>
        </h:form>   
    </ui:composition>
</html>
